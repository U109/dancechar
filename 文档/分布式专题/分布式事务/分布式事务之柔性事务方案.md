                                        高频面试题：分布式事务之柔性事务方案
一、基本概念
1、什么是分布式事务？
1）

2、分布式事务现状？
1）

二、使用场景
以营销系统活动为例，运营后台配置一个任务类活动，一个活动下面可以挂多个任务
用户登录小程序或APP，进入活动页面，可以完成指定任务列表的任务：
1）新增



三、实现方案
1、定时任务轮询数据库
2、Java提供的DelayQueue
3、netty提供的时间轮算法实现类HashedWheelTimer
4、消息中间件(rabbitmq、rocketmq、kafka)延迟消息
5、redis的sorted set或redis key过期回调

四、实现落地



五、总结
根据公司的实际情况，选择不同的方案，推荐采用消息队列的延时消息，稳定可靠。如果使用的消息队列不支持延时，可以采用基于redis的方式实现
延时队列，另外：对于延时消息的可靠性要求很高的，不忍许丢失的场景，可以配合数据库，进行轮询的方式实现补偿。

六、思考
假如我们在做消息推送，要求延时5秒以后推送消息，1分钟达到几百万的数据量，我们如何设计？
1、定时器轮询
2、mq延时推送
3、redis延时推送










